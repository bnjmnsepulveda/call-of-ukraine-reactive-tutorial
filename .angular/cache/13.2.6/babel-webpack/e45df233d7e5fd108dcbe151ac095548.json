{"ast":null,"code":"import { interval, map, take } from 'rxjs';\nimport { ReactiveComponent } from 'src/app/presentation/shared/utils/ReactiveComponent';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction WhacAMoleComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function WhacAMoleComponent_ng_template_9_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const square_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.hitTarget(square_r1);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const square_r1 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"id\", square_r1.id);\n    i0.ɵɵproperty(\"ngClass\", square_r1.selected ? \"square mole\" : \"square\");\n  }\n}\n\nexport class WhacAMoleComponent extends ReactiveComponent {\n  constructor() {\n    super();\n    this.selectedSquare = 0;\n    this.hitPosition = 0;\n    this.targets = null;\n    this.hits = 0;\n    this.seconds = 0;\n  }\n\n  ngOnInit() {\n    const fireTime = new FireTime(500, 60);\n    this.seconds = fireTime.seconds;\n    this.targets = interval(fireTime.interval).pipe(take(fireTime.take), map(() => Math.floor(Math.random() * 9)), map(randomIndex => this.getSquares(randomIndex)));\n    this.timer(fireTime.seconds).subscribe(x => {\n      console.log('timerr!!!');\n      this.seconds -= 1;\n    });\n    this.addSubscription();\n  }\n\n  ngOnDestroy() {\n    this.unsubscribeComponent();\n  }\n\n  timer(seconds) {\n    console.log('setting timer', seconds);\n    return interval(seconds * 1000).pipe(take(seconds));\n  }\n\n  hitTarget(target) {\n    console.log('target-hit', target.selected);\n\n    if (target.selected) {\n      this.hits++;\n    }\n  }\n\n  getSquares(x) {\n    const randomIndex = x;\n    const indexes = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n    return indexes.map(id => ({\n      id,\n      selected: id === randomIndex\n    }));\n  }\n\n}\n\nWhacAMoleComponent.ɵfac = function WhacAMoleComponent_Factory(t) {\n  return new (t || WhacAMoleComponent)();\n};\n\nWhacAMoleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WhacAMoleComponent,\n  selectors: [[\"app-whac-a-mole\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 11,\n  vars: 5,\n  consts: [[\"id\", \"score\"], [\"id\", \"time-left\"], [1, \"grid\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"ngClass\", \"id\", \"click\"]],\n  template: function WhacAMoleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Your score:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"h2\", 0);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"h2\");\n      i0.ɵɵtext(5, \"Time Left:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"h2\", 1);\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 2);\n      i0.ɵɵtemplate(9, WhacAMoleComponent_ng_template_9_Template, 1, 2, \"ng-template\", 3);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.hits);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.seconds, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(10, 3, ctx.targets));\n    }\n  },\n  directives: [i1.NgForOf, i1.NgClass],\n  pipes: [i1.AsyncPipe],\n  styles: [\".grid[_ngcontent-%COMP%] {\\n       width: 380px;\\n      height: 380px; \\n      display: flex;\\n      flex-wrap: wrap;\\n    }\\n\\n    .square[_ngcontent-%COMP%] {\\n      height: 100px;\\n      width: 100px;\\n      border: solid black 1px;\\n    }\\n\\n    .mole[_ngcontent-%COMP%] {\\n      background-image: url(\\\"assets/mole.jpg\\\");\\n      background-size: cover;\\n    }\"]\n});\n\nclass FireTime {\n  constructor(interval, seconds) {\n    this.interval = interval;\n    this.seconds = seconds;\n  }\n\n  get take() {\n    return this.seconds * 1000 / this.interval;\n  }\n\n}","map":{"version":3,"sources":["/Users/benjamin/Documents/repositories/learning/reactive-programming-workshop/call-of-ukraine-frontend/src/app/presentation/pages/game/component/whac-a-mole/whac-a-mole.component.ts"],"names":["interval","map","take","ReactiveComponent","i0","i1","WhacAMoleComponent_ng_template_9_Template","rf","ctx","_r3","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","WhacAMoleComponent_ng_template_9_Template_div_click_0_listener","restoredCtx","ɵɵrestoreView","square_r1","$implicit","ctx_r2","ɵɵnextContext","hitTarget","ɵɵelementEnd","ɵɵpropertyInterpolate","id","ɵɵproperty","selected","WhacAMoleComponent","constructor","selectedSquare","hitPosition","targets","hits","seconds","ngOnInit","fireTime","FireTime","pipe","Math","floor","random","randomIndex","getSquares","timer","subscribe","x","console","log","addSubscription","ngOnDestroy","unsubscribeComponent","target","indexes","ɵfac","WhacAMoleComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","WhacAMoleComponent_Template","ɵɵtext","ɵɵtemplate","ɵɵpipe","ɵɵadvance","ɵɵtextInterpolate","ɵɵtextInterpolate1","ɵɵpipeBind1","directives","NgForOf","NgClass","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { interval, map, take } from 'rxjs';\nimport { ReactiveComponent } from 'src/app/presentation/shared/utils/ReactiveComponent';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction WhacAMoleComponent_ng_template_9_Template(rf, ctx) { if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵlistener(\"click\", function WhacAMoleComponent_ng_template_9_Template_div_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r3); const square_r1 = restoredCtx.$implicit; const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.hitTarget(square_r1); });\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const square_r1 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"id\", square_r1.id);\n    i0.ɵɵproperty(\"ngClass\", square_r1.selected ? \"square mole\" : \"square\");\n} }\nexport class WhacAMoleComponent extends ReactiveComponent {\n    constructor() {\n        super();\n        this.selectedSquare = 0;\n        this.hitPosition = 0;\n        this.targets = null;\n        this.hits = 0;\n        this.seconds = 0;\n    }\n    ngOnInit() {\n        const fireTime = new FireTime(500, 60);\n        this.seconds = fireTime.seconds;\n        this.targets = interval(fireTime.interval).pipe(take(fireTime.take), map(() => Math.floor(Math.random() * 9)), map(randomIndex => this.getSquares(randomIndex)));\n        this.timer(fireTime.seconds).subscribe(x => {\n            console.log('timerr!!!');\n            this.seconds -= 1;\n        });\n        this.addSubscription();\n    }\n    ngOnDestroy() {\n        this.unsubscribeComponent();\n    }\n    timer(seconds) {\n        console.log('setting timer', seconds);\n        return interval(seconds * 1000).pipe(take(seconds));\n    }\n    hitTarget(target) {\n        console.log('target-hit', target.selected);\n        if (target.selected) {\n            this.hits++;\n        }\n    }\n    getSquares(x) {\n        const randomIndex = x;\n        const indexes = [1, 2, 3, 4, 5, 6, 7, 8, 9];\n        return indexes.map(id => ({\n            id,\n            selected: id === randomIndex\n        }));\n    }\n}\nWhacAMoleComponent.ɵfac = function WhacAMoleComponent_Factory(t) { return new (t || WhacAMoleComponent)(); };\nWhacAMoleComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: WhacAMoleComponent, selectors: [[\"app-whac-a-mole\"]], features: [i0.ɵɵInheritDefinitionFeature], decls: 11, vars: 5, consts: [[\"id\", \"score\"], [\"id\", \"time-left\"], [1, \"grid\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [3, \"ngClass\", \"id\", \"click\"]], template: function WhacAMoleComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"Your score:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"h2\", 0);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"h2\");\n        i0.ɵɵtext(5, \"Time Left:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"h2\", 1);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 2);\n        i0.ɵɵtemplate(9, WhacAMoleComponent_ng_template_9_Template, 1, 2, \"ng-template\", 3);\n        i0.ɵɵpipe(10, \"async\");\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.hits);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.seconds, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(10, 3, ctx.targets));\n    } }, directives: [i1.NgForOf, i1.NgClass], pipes: [i1.AsyncPipe], styles: [\".grid[_ngcontent-%COMP%] {\\n       width: 380px;\\n      height: 380px; \\n      display: flex;\\n      flex-wrap: wrap;\\n    }\\n\\n    .square[_ngcontent-%COMP%] {\\n      height: 100px;\\n      width: 100px;\\n      border: solid black 1px;\\n    }\\n\\n    .mole[_ngcontent-%COMP%] {\\n      background-image: url(\\\"assets/mole.jpg\\\");\\n      background-size: cover;\\n    }\"] });\nclass FireTime {\n    constructor(interval, seconds) {\n        this.interval = interval;\n        this.seconds = seconds;\n    }\n    get take() {\n        return (this.seconds * 1000) / this.interval;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
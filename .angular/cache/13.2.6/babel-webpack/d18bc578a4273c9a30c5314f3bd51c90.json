{"ast":null,"code":"import { BehaviorSubject, concatMap, delay, filter, from, generate, map, merge, mergeMap, of, pluck, share, skipWhile, startWith, switchMap, tap } from 'rxjs';\nimport { ReactiveComponent } from 'src/app/presentation/shared/utils/ReactiveComponent';\nimport { erase, draw, SquareDraw, createColumns, createRows, createSquares } from './model/Square';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"screen\"];\n\nfunction ReactiveGhostOfKievComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const square_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r1.getSquareClassnames(square_r2));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", square_r2.key, \" \");\n  }\n}\n\nexport class ReactiveGhostOfKievComponent extends ReactiveComponent {\n  constructor() {\n    super(); // screen\n\n    this.title = 'REACTIVE Ghost of Kiev';\n    this.squares = [];\n    this.columns = [];\n    this.rows = []; // game\n\n    this.squareDrawShooter = new SquareDraw({\n      column: 'H',\n      row: 14,\n      name: 'ghost-of-kiev',\n      type: 'shooter'\n    }); // reactive components\n\n    this.squares$ = null;\n    this.subject = new BehaviorSubject([]);\n  }\n\n  ngOnInit() {\n    //this.squares = this.createSquares(15, 15)\n    this.subject.next(this.createSquares(15, 15)); // this.subject.subscribe(x => this.squares = x)\n\n    this.squares$ = merge(this.onMoveShooter(), this.onShoot(), this.movingRussianTroop()).pipe(map(x => this.updateSquare(x)), share());\n    const shootListener$ = this.squares$.pipe(switchMap(x => from(x)), map(x => x.drawings.map(y => y.type)), filter(x => x.length > 1));\n    const shootListener2$ = this.squares$.pipe(switchMap(x => from(x)), filter(x => {\n      let types = x.drawings.map(y => y.type);\n      return types.includes('invader') && types.includes('laser');\n    }));\n    this.addSubscription(this.squares$.subscribe(x => {}), // shootListener$.subscribe(x => console.log('rendered event', x)),\n    shootListener2$.subscribe(x => console.log('shoot', x))); // this.addSubscription(\n    //   this.onMoveShooter().subscribe(sd => this.subscribeToDrawingSquare(sd)),\n    //   this.onShoot().subscribe(sd => this.subscribeToDrawingSquare(sd)),\n    //   this.movingRussianTroop().subscribe(sd => this.subscribeToDrawingSquare(sd))\n    // )\n  }\n\n  ngOnDestroy() {\n    this.unsubscribeComponent();\n  } //#region Calculating screen and squares\n\n\n  createSquares(columnSize, rowSize) {\n    this.columns = createColumns(columnSize);\n    this.rows = createRows(rowSize);\n    return createSquares(this.columns, this.rows);\n  }\n\n  getSquareClassnames(square) {\n    return square.drawings.map(d => d.type).join(' ');\n  }\n\n  updateSquare(drawing) {\n    console.log('draw-square', drawing);\n    const erased = erase([...this.squares], drawing);\n    const drawed = draw(erased, drawing);\n    console.log(drawed);\n    return drawed;\n  }\n\n  getNextColumn(column) {\n    const index = this.columns.indexOf(column) + 1;\n\n    if (index >= 0 && index < this.columns.length) {\n      return this.columns[index];\n    }\n\n    return null;\n  }\n\n  getPrevColumn(column) {\n    const index = this.columns.indexOf(column) - 1;\n\n    if (index >= 0 && index < this.columns.length) {\n      return this.columns[index];\n    }\n\n    return null;\n  }\n\n  getNextRow(row) {\n    const index = this.rows.indexOf(row) + 1;\n\n    if (index >= 0 && index < this.rows.length) {\n      return this.rows[index];\n    }\n\n    return -1;\n  }\n\n  getPrevRow(row) {\n    const index = this.rows.indexOf(row) - 1;\n\n    if (index >= 0 && index < this.rows.length) {\n      return this.rows[index];\n    }\n\n    return -1;\n  } //#endregion\n  //#region Game observables\n\n\n  moveDrawing(direction, intervaltime, initialDrawing) {\n    const iterators = {\n      up: squareDraw => {\n        return new SquareDraw({\n          column: squareDraw.column,\n          row: this.getPrevRow(squareDraw.row),\n          name: squareDraw.drawing.name,\n          type: squareDraw.drawing.type\n        });\n      },\n      down: squareDraw => {\n        return new SquareDraw({\n          column: squareDraw.column,\n          row: this.getNextRow(squareDraw.row),\n          name: squareDraw.drawing.name,\n          type: squareDraw.drawing.type\n        });\n      },\n      right: squareDraw => {\n        return new SquareDraw({\n          column: this.getNextColumn(squareDraw.column),\n          row: squareDraw.row,\n          name: squareDraw.drawing.name,\n          type: squareDraw.drawing.type\n        });\n      },\n      left: squareDraw => {\n        return new SquareDraw({\n          column: this.getPrevColumn(squareDraw.column),\n          row: squareDraw.row,\n          name: squareDraw.drawing.name,\n          type: squareDraw.drawing.type\n        });\n      }\n    };\n\n    const columnCondition = squareDraw => {\n      const index = this.columns.indexOf(squareDraw.column);\n      return index >= 0 && index < this.columns.length;\n    };\n\n    const rowCondition = squareDraw => {\n      return squareDraw.row >= 0 && squareDraw.row < this.rows.length;\n    };\n\n    const conditions = {\n      up: rowCondition,\n      down: rowCondition,\n      right: columnCondition,\n      left: columnCondition\n    };\n    return generate({\n      initialState: initialDrawing,\n      condition: x => conditions[direction](x),\n      iterate: x => iterators[direction](x)\n    }).pipe(concatMap(item => of(item).pipe(delay(intervaltime))));\n  }\n\n  ghostOfKievShooting() {\n    const row = this.squareDrawShooter.row;\n    const laser = new SquareDraw({\n      column: this.squareDrawShooter.column,\n      row: this.getPrevRow(row),\n      name: 'ghost-of-kiev-laser',\n      type: 'laser'\n    });\n    return this.moveDrawing('up', 500, laser);\n  }\n\n  movingRussianTroop() {\n    return from([new SquareDraw({\n      column: 'B',\n      row: 0,\n      name: 'soldier-1',\n      type: 'invader'\n    }), new SquareDraw({\n      column: 'C',\n      row: 0,\n      name: 'soldier-2',\n      type: 'invader'\n    }), new SquareDraw({\n      column: 'D',\n      row: 0,\n      name: 'soldier-3',\n      type: 'invader'\n    })]).pipe(mergeMap(s => this.moveDrawing('down', 1000, s)));\n  }\n\n  onShoot() {\n    return this.fromElementRefEvent(this.screen, 'keydown').pipe(pluck('key'), filter(key => key === 'ArrowUp'), concatMap(() => this.ghostOfKievShooting()));\n  }\n\n  onMoveShooter() {\n    const moving$ = this.fromElementRefEvent(this.screen, 'keydown').pipe(pluck('key'), filter(key => key === 'ArrowRight' || key === 'ArrowLeft'));\n\n    const moveSquareDraw = () => source => source.pipe(skipWhile(column => column === null), map(column => {\n      return new SquareDraw({\n        column: column,\n        row: this.squareDrawShooter.row,\n        name: this.squareDrawShooter.drawing.name,\n        type: this.squareDrawShooter.drawing.type\n      });\n    }));\n\n    const right$ = moving$.pipe(filter(key => key === 'ArrowRight'), map(() => this.getNextColumn(this.squareDrawShooter.column)), moveSquareDraw());\n    const left$ = moving$.pipe(filter(key => key === 'ArrowLeft'), map(() => this.getPrevColumn(this.squareDrawShooter.column)), moveSquareDraw());\n    return merge(right$, left$).pipe(startWith(this.squareDrawShooter), tap(x => this.squareDrawShooter = x));\n  }\n\n}\n\nReactiveGhostOfKievComponent.ɵfac = function ReactiveGhostOfKievComponent_Factory(t) {\n  return new (t || ReactiveGhostOfKievComponent)();\n};\n\nReactiveGhostOfKievComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReactiveGhostOfKievComponent,\n  selectors: [[\"app-reactive-ghost-of-kiev\"]],\n  viewQuery: function ReactiveGhostOfKievComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.screen = _t.first);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 9,\n  vars: 4,\n  consts: [[\"contenteditable\", \"true\", \"tabindex\", \"0\", 1, \"message\", \"app-section\"], [\"screen\", \"\"], [1, \"message-header\"], [1, \"grid\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [1, \"message-body\"]],\n  template: function ReactiveGhostOfKievComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"article\", 0, 1)(2, \"div\", 2)(3, \"p\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 3);\n      i0.ɵɵtemplate(6, ReactiveGhostOfKievComponent_ng_template_6_Template, 2, 3, \"ng-template\", 4);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"div\", 5);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.title, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(7, 2, ctx.subject));\n    }\n  },\n  directives: [i1.NgForOf],\n  pipes: [i1.AsyncPipe],\n  styles: [\".grid[_ngcontent-%COMP%] {\\n        width: 302px;\\n        height: 302px;\\n        border: solid black 1px;\\n        display: flex;\\n        flex-wrap: wrap;\\n      }\\n\\n      .grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n        width: 20px;\\n        height: 20px;\\n        border: solid burlywood 0.5px;\\n        font-size: 0.4rem;\\n      }\\n\\n      .invader[_ngcontent-%COMP%] {\\n        background-color: purple;\\n        border-radius: 10px;\\n      }\\n\\n      .shooter[_ngcontent-%COMP%] {\\n        background-color: green;\\n      }\\n\\n      .laser[_ngcontent-%COMP%] {\\n        background-color: orange;\\n      }\\n\\n      .boom[_ngcontent-%COMP%] {\\n        background-color: red;\\n      }\\n\\n      .app-section[_ngcontent-%COMP%] {\\n        caret-color: transparent;\\n      }\"]\n});","map":{"version":3,"sources":["/Users/benjamin/Documents/repositories/learning/reactive-programming-workshop/call-of-ukraine-frontend/src/app/presentation/pages/game/component/ghost-of-kiev/reactive-ghost-of-kiev.component.ts"],"names":["BehaviorSubject","concatMap","delay","filter","from","generate","map","merge","mergeMap","of","pluck","share","skipWhile","startWith","switchMap","tap","ReactiveComponent","erase","draw","SquareDraw","createColumns","createRows","createSquares","i0","i1","_c0","ReactiveGhostOfKievComponent_ng_template_6_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","square_r2","$implicit","ctx_r1","ɵɵnextContext","ɵɵclassMap","getSquareClassnames","ɵɵadvance","ɵɵtextInterpolate1","key","ReactiveGhostOfKievComponent","constructor","title","squares","columns","rows","squareDrawShooter","column","row","name","type","squares$","subject","ngOnInit","next","onMoveShooter","onShoot","movingRussianTroop","pipe","x","updateSquare","shootListener$","drawings","y","length","shootListener2$","types","includes","addSubscription","subscribe","console","log","ngOnDestroy","unsubscribeComponent","columnSize","rowSize","square","d","join","drawing","erased","drawed","getNextColumn","index","indexOf","getPrevColumn","getNextRow","getPrevRow","moveDrawing","direction","intervaltime","initialDrawing","iterators","up","squareDraw","down","right","left","columnCondition","rowCondition","conditions","initialState","condition","iterate","item","ghostOfKievShooting","laser","s","fromElementRefEvent","screen","moving$","moveSquareDraw","source","right$","left$","ɵfac","ReactiveGhostOfKievComponent_Factory","t","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","ReactiveGhostOfKievComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","ReactiveGhostOfKievComponent_Template","ɵɵtemplate","ɵɵpipe","ɵɵelement","ɵɵproperty","ɵɵpipeBind1","directives","NgForOf","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { BehaviorSubject, concatMap, delay, filter, from, generate, map, merge, mergeMap, of, pluck, share, skipWhile, startWith, switchMap, tap } from 'rxjs';\nimport { ReactiveComponent } from 'src/app/presentation/shared/utils/ReactiveComponent';\nimport { erase, draw, SquareDraw, createColumns, createRows, createSquares } from './model/Square';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"screen\"];\nfunction ReactiveGhostOfKievComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const square_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r1.getSquareClassnames(square_r2));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", square_r2.key, \" \");\n} }\nexport class ReactiveGhostOfKievComponent extends ReactiveComponent {\n    constructor() {\n        super();\n        // screen\n        this.title = 'REACTIVE Ghost of Kiev';\n        this.squares = [];\n        this.columns = [];\n        this.rows = [];\n        // game\n        this.squareDrawShooter = new SquareDraw({ column: 'H', row: 14, name: 'ghost-of-kiev', type: 'shooter' });\n        // reactive components\n        this.squares$ = null;\n        this.subject = new BehaviorSubject([]);\n    }\n    ngOnInit() {\n        //this.squares = this.createSquares(15, 15)\n        this.subject.next(this.createSquares(15, 15));\n        // this.subject.subscribe(x => this.squares = x)\n        this.squares$ = merge(this.onMoveShooter(), this.onShoot(), this.movingRussianTroop()).pipe(map(x => this.updateSquare(x)), share());\n        const shootListener$ = this.squares$.pipe(switchMap(x => from(x)), map(x => x.drawings.map(y => y.type)), filter(x => x.length > 1));\n        const shootListener2$ = this.squares$.pipe(switchMap(x => from(x)), filter(x => {\n            let types = x.drawings.map(y => y.type);\n            return types.includes('invader') && types.includes('laser');\n        }));\n        this.addSubscription(this.squares$.subscribe(x => { }), \n        // shootListener$.subscribe(x => console.log('rendered event', x)),\n        shootListener2$.subscribe(x => console.log('shoot', x)));\n        // this.addSubscription(\n        //   this.onMoveShooter().subscribe(sd => this.subscribeToDrawingSquare(sd)),\n        //   this.onShoot().subscribe(sd => this.subscribeToDrawingSquare(sd)),\n        //   this.movingRussianTroop().subscribe(sd => this.subscribeToDrawingSquare(sd))\n        // )\n    }\n    ngOnDestroy() {\n        this.unsubscribeComponent();\n    }\n    //#region Calculating screen and squares\n    createSquares(columnSize, rowSize) {\n        this.columns = createColumns(columnSize);\n        this.rows = createRows(rowSize);\n        return createSquares(this.columns, this.rows);\n    }\n    getSquareClassnames(square) {\n        return square.drawings.map(d => d.type).join(' ');\n    }\n    updateSquare(drawing) {\n        console.log('draw-square', drawing);\n        const erased = erase([...this.squares], drawing);\n        const drawed = draw(erased, drawing);\n        console.log(drawed);\n        return drawed;\n    }\n    getNextColumn(column) {\n        const index = this.columns.indexOf(column) + 1;\n        if (index >= 0 && index < this.columns.length) {\n            return this.columns[index];\n        }\n        return null;\n    }\n    getPrevColumn(column) {\n        const index = this.columns.indexOf(column) - 1;\n        if (index >= 0 && index < this.columns.length) {\n            return this.columns[index];\n        }\n        return null;\n    }\n    getNextRow(row) {\n        const index = this.rows.indexOf(row) + 1;\n        if (index >= 0 && index < this.rows.length) {\n            return this.rows[index];\n        }\n        return -1;\n    }\n    getPrevRow(row) {\n        const index = this.rows.indexOf(row) - 1;\n        if (index >= 0 && index < this.rows.length) {\n            return this.rows[index];\n        }\n        return -1;\n    }\n    //#endregion\n    //#region Game observables\n    moveDrawing(direction, intervaltime, initialDrawing) {\n        const iterators = {\n            up: (squareDraw) => {\n                return new SquareDraw({\n                    column: squareDraw.column,\n                    row: this.getPrevRow(squareDraw.row),\n                    name: squareDraw.drawing.name,\n                    type: squareDraw.drawing.type\n                });\n            },\n            down: (squareDraw) => {\n                return new SquareDraw({\n                    column: squareDraw.column,\n                    row: this.getNextRow(squareDraw.row),\n                    name: squareDraw.drawing.name,\n                    type: squareDraw.drawing.type\n                });\n            },\n            right: (squareDraw) => {\n                return new SquareDraw({\n                    column: this.getNextColumn(squareDraw.column),\n                    row: squareDraw.row,\n                    name: squareDraw.drawing.name,\n                    type: squareDraw.drawing.type\n                });\n            },\n            left: (squareDraw) => {\n                return new SquareDraw({\n                    column: this.getPrevColumn(squareDraw.column),\n                    row: squareDraw.row,\n                    name: squareDraw.drawing.name,\n                    type: squareDraw.drawing.type\n                });\n            }\n        };\n        const columnCondition = (squareDraw) => {\n            const index = this.columns.indexOf(squareDraw.column);\n            return index >= 0 && index < this.columns.length;\n        };\n        const rowCondition = (squareDraw) => {\n            return squareDraw.row >= 0 && squareDraw.row < this.rows.length;\n        };\n        const conditions = {\n            up: rowCondition,\n            down: rowCondition,\n            right: columnCondition,\n            left: columnCondition\n        };\n        return generate({\n            initialState: initialDrawing,\n            condition: x => conditions[direction](x),\n            iterate: x => iterators[direction](x),\n        }).pipe(concatMap((item) => of(item).pipe(delay(intervaltime))));\n    }\n    ghostOfKievShooting() {\n        const row = this.squareDrawShooter.row;\n        const laser = new SquareDraw({\n            column: this.squareDrawShooter.column,\n            row: this.getPrevRow(row),\n            name: 'ghost-of-kiev-laser',\n            type: 'laser'\n        });\n        return this.moveDrawing('up', 500, laser);\n    }\n    movingRussianTroop() {\n        return from([\n            new SquareDraw({ column: 'B', row: 0, name: 'soldier-1', type: 'invader' }),\n            new SquareDraw({ column: 'C', row: 0, name: 'soldier-2', type: 'invader' }),\n            new SquareDraw({ column: 'D', row: 0, name: 'soldier-3', type: 'invader' })\n        ]).pipe(mergeMap(s => this.moveDrawing('down', 1000, s)));\n    }\n    onShoot() {\n        return this.fromElementRefEvent(this.screen, 'keydown').pipe(pluck('key'), filter((key) => key === 'ArrowUp'), concatMap(() => this.ghostOfKievShooting()));\n    }\n    onMoveShooter() {\n        const moving$ = this.fromElementRefEvent(this.screen, 'keydown').pipe(pluck('key'), filter((key) => key === 'ArrowRight' || key === 'ArrowLeft'));\n        const moveSquareDraw = () => (source) => source.pipe(skipWhile(column => column === null), map(column => {\n            return new SquareDraw({\n                column: column,\n                row: this.squareDrawShooter.row,\n                name: this.squareDrawShooter.drawing.name,\n                type: this.squareDrawShooter.drawing.type\n            });\n        }));\n        const right$ = moving$.pipe(filter((key) => key === 'ArrowRight'), map(() => this.getNextColumn(this.squareDrawShooter.column)), moveSquareDraw());\n        const left$ = moving$.pipe(filter((key) => key === 'ArrowLeft'), map(() => this.getPrevColumn(this.squareDrawShooter.column)), moveSquareDraw());\n        return merge(right$, left$).pipe(startWith(this.squareDrawShooter), tap(x => this.squareDrawShooter = x));\n    }\n}\nReactiveGhostOfKievComponent.ɵfac = function ReactiveGhostOfKievComponent_Factory(t) { return new (t || ReactiveGhostOfKievComponent)(); };\nReactiveGhostOfKievComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ReactiveGhostOfKievComponent, selectors: [[\"app-reactive-ghost-of-kiev\"]], viewQuery: function ReactiveGhostOfKievComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.screen = _t.first);\n    } }, features: [i0.ɵɵInheritDefinitionFeature], decls: 9, vars: 4, consts: [[\"contenteditable\", \"true\", \"tabindex\", \"0\", 1, \"message\", \"app-section\"], [\"screen\", \"\"], [1, \"message-header\"], [1, \"grid\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [1, \"message-body\"]], template: function ReactiveGhostOfKievComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"article\", 0, 1)(2, \"div\", 2)(3, \"p\");\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtemplate(6, ReactiveGhostOfKievComponent_ng_template_6_Template, 2, 3, \"ng-template\", 4);\n        i0.ɵɵpipe(7, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"div\", 5);\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.title, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(7, 2, ctx.subject));\n    } }, directives: [i1.NgForOf], pipes: [i1.AsyncPipe], styles: [\".grid[_ngcontent-%COMP%] {\\n        width: 302px;\\n        height: 302px;\\n        border: solid black 1px;\\n        display: flex;\\n        flex-wrap: wrap;\\n      }\\n\\n      .grid[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n        width: 20px;\\n        height: 20px;\\n        border: solid burlywood 0.5px;\\n        font-size: 0.4rem;\\n      }\\n\\n      .invader[_ngcontent-%COMP%] {\\n        background-color: purple;\\n        border-radius: 10px;\\n      }\\n\\n      .shooter[_ngcontent-%COMP%] {\\n        background-color: green;\\n      }\\n\\n      .laser[_ngcontent-%COMP%] {\\n        background-color: orange;\\n      }\\n\\n      .boom[_ngcontent-%COMP%] {\\n        background-color: red;\\n      }\\n\\n      .app-section[_ngcontent-%COMP%] {\\n        caret-color: transparent;\\n      }\"] });\n"]},"metadata":{},"sourceType":"module"}